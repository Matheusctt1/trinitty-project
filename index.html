<!DOCTYPE html>
<html lang="pt_br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Trinity</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="styles/style.css" rel="stylesheet">
  <link href="styles/cores.css" rel="stylesheet">
</head>
<body class="d-flex align-items-center justify-content-center vh-100 fundo-nav">
  
  <div class="card p-4 shadow-lg" style="width: 350px;">
    <h3 class="text-center mb-4 fonte-titulos">Login</h3>

    <!-- Botão Visitante -->
    <div class="d-grid gap-2 mb-3">
      <a href="paginaInicial.html" class="btn cor-botoes">Entrar como Visitante</a>
    </div>

    <hr>

    <!-- Botão para exibir formulário Admin -->
    <div class="d-grid mb-3">
      <button class="btn btn-dark" onclick="mostrarFormulario()">Entrar como Admin</button>
    </div>

    <!-- Formulário Admin escondido -->
    <form id="formAdmin" class="d-none" onsubmit="return validarLogin(event)">
      <div class="mb-3">
        <label for="usuario" class="form-label">E-mail</label>
        <input type="email" class="form-control" id="usuario" placeholder="admin@trinity.com" required>
      </div>
      <div class="mb-3">
        <label for="senha" class="form-label">Senha</label>
        <input type="password" class="form-control" id="senha" required>
      </div>
      <div class="d-grid">
        <button type="submit" class="btn btn-success">Confirmar Login</button>
      </div>
    </form>
  </div>

  <!-- Firebase SDK -->
  <script type="module">
    // Importando SDKs do Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    // ⚠️ Troque com as configs do seu projeto no Firebase Console
    const firebaseConfig = {
        apiKey: "AIzaSyBkqEffbS63XzfAvX5T3fJvYtZrAgPQiYE",
        authDomain: "trinnity-project.firebaseapp.com",
        projectId: "trinnity-project",
        storageBucket: "trinnity-project.firebasestorage.app",
        messagingSenderId: "97395639324",
        appId: "1:97395639324:web:e057ca2ef54110eb288bd9"
    };

    // Inicializando
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Mostrar formulário Admin
    window.mostrarFormulario = function() {
      document.getElementById("formAdmin").classList.remove("d-none");
    }

    // Validar Login com Firebase
    window.validarLogin = async function(e) {
      e.preventDefault();
      const usuario = document.getElementById("usuario").value;
      const senha = document.getElementById("senha").value;

        try {
            await signInWithEmailAndPassword(auth, usuario, senha);
            alert("Login bem-sucedido!");
            // ⚡️ Marcar usuário como admin
            sessionStorage.setItem("usuarioAdmin", "true");
            window.location.href = "<pages>paginaInicial.html"; 
        } catch (error) {
            alert("Erro: " + error.message);
        }
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

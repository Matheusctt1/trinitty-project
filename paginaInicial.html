<!DOCTYPE html>
<html lang="pt_br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trinity</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles/style.css" rel="stylesheet">
    <link href="styles/cores.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
    
    <!--NAVBAR-->
    <nav class="navbar fundo-nav">
        <div class="container-fluid">
          <a class="navbar-brand d-flex" href="#">
            <img src="assets/logo.png" alt="Logo Trinity" width="40" height="40" class="align-text-center mx-2">
            <p class="fonte-titulo mx-3">TRINNITY</p>
          </a>
          <nav class="navbar navbar-expand-md">
            <div class="container-fluid">
              <button class="navbar-toggler" type="button" style="background-color: white;" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse align-text-center" id="navbarNavDropdown">
                <ul class="navbar-nav">
                  <li class="nav-item">
                    <a class="fonte-link nav-link" aria-current="page" href="#">Inicio</a>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="fonte-link nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Sistemas
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="fonte-dropdown dropdown-item nav-dropdown" href="#">D&D</a></li>
                    </ul>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
        </div>
    </nav>
    
    <!--SLIDER-->
    <div id="carouselExampleCaptions" class="carousel slide fixarImagem" data-bs-ride="true">
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="d-flex">
            <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="assets/img_carr_1.jpg" class="banner w-100" width="800" height="500" alt="Banner Fichas">
                <img src="assets/imgteste.jpg" class="banner_mob w-100" width="600" height="250" alt="Banner Mobile">
                <div class="carousel-caption ">
                    <h5 class="fonte-carosel">Fichas</h5>
                    <p class="fonte-sub-titulo">Editaveis</p>
                </div>
            </div>
            <div class="carousel-item"> 
                <img src="assets/img_carr_2.jpg" class="banner w-800" width="800" height="500" alt="Banner Sistemas">
                <img src="assets/imgteste.jpg" class="banner_mob w-100" width="600" height="250" alt="Banner Mobile">
                <div class="carousel-caption">
                    <h5 class="fonte-carosel">Sistemas</h5>
                    <p class="fonte-sub-titulo">diversos</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="assets/img_carr_3.jpg" class="banner w-100" width="800" height="500" alt="Banner Comunidade">
                <img src="assets/imgteste.jpg" class="banner_mob w-100" width="600" height="250" alt="Banner Mobile">
                <div class="carousel-caption">
                    <h5 class="fonte-carosel">Comunidade</h5>
                    <p class="fonte-sub-titulo">Calorosa e Sofisticada</p>
                </div>
            </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
    
    <!--CARDS SISTEMAS-->
    <div>
      <h1 class="text-center fonte-explora fonte-titulos my-4">Explorar Sistemas</h1>
      <div class="container row d-flex justify-content-between my-3 mx-auto py-3">
        <div class="col-xxl-3 my-4">
          <div class="card fundo-card" style="width: auto; height: 335px;">
            <img src="assets/simbolo_d&d.png" class="card-img-top  mx-auto my-3" style="width: 13rem; height: 12rem;" alt="Símbolo D&D">
            <div class="card-body text-center mt-2 d-flex flex-column">
              <h5 class="card-title">Dungeons & Dragons</h5>
              <a href="#" class="btn cor-botoes" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasD&d" aria-controls="offcanvasRight">Explorar</a>
            </div>
          </div>
        </div>
        <div class="col-xxl-3 my-4">
          <div class="card fundo-card" style="width: auto; height: 335px;">
            <img src="assets/simbolo.png" class="card-img-top mx-auto my-3" style="width: 13rem; height: 12rem;" alt="Símbolo placeholder">
            <div class="card-body text-center mt-2 d-flex flex-column">
              <h5 class="card-title">Em breve...</h5>
              <a href="#" class="btn cor-botoes">Explorar</a>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-around mx-auto mt-3 mb-1">
          <button type="button" class="btn cor-botoes py-3" style="width: 400px;">Explorar Todos os Sistemas</button>
        </div>
      </div>  
    </div>

    <!--OFFCANVAS D&d-->
    <div>
      <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasD&d" aria-labelledby="offcanvasRightLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title fonte-titulos" id="offcanvasRightLabel">Dungeons & Dragons</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          ...
        </div>
      </div>
    </div>

    <!--COMUNIDADE-->
      <div>
        <div class="jogadores gradiente d-flex justify-content-end ">
          <div class="container_comunidade  d-flex flex-column text-center px-5 py-5" style=" height: 250px;">
            <div class="comunidade my-4 fonte-titulos">
              <h2>Encontre Grupos</h2>
            </div>
            <div class="comunidade_texto">
              <p>Junte-se a nossa comunidade do discord para conseguir aliados e integrantes para a sua nova jornada.</p>
            </div>
            <a href="#" type="button" class="btn cor-botoes py-3 mt-5">Participe</a>
          </div>
        </div>
      </div>
      
    <!--SEÇÃO SUGESTÕES / ADMIN -->
    <div id="secaoSugestoes" class="d-flex justify-content-around">
      <div class="container_fantasia my-5 mx-5 d-flex flex-column text-center " style="width: 800px;">
        <div class="titulo-fantasia fonte-titulos my-3">
          <h2>Envie-nos sugestões</h2>
        </div>
        <div class="texto-fantasia">
          <p>Este site está em constante atualização, sendo adicionados novos sistemas e atualizações para os sistemas já adicionados. Se você tiver algumas para a adição de novos sistemas, nos envie no formulário abaixo.</p>
        </div>
        <form onsubmit="return forms_alerta(document.getElementById('inputUsuario').value, this)">
          <div class="form-fantasia">
            <div class="form-floating mb-3">
              <input type="text" name="Usuário" class="form-control" id="inputUsuario" placeholder="Seu nome" required>
              <label for="inputUsuario">Nome de Usuário</label>
            </div>
            <div class="form-floating">
              <input type="email" name="email" class="form-control" id="inputEmail" placeholder="name@example.com" required>
              <label for="inputEmail">Email</label>
            </div>
            <div class="form-floating mt-3">
              <textarea type="text" name="Sugestão" class="form-control" placeholder="Escreva sua sugestão" id="inputSugestao" style="height: 150px" required></textarea>
              <label for="inputSugestao">Sugestão</label>
            </div>
          </div>
          <div class="d-flex justify-content-around mx-auto mt-3 mb-1">
                        <button type="submit" class="btn cor-botoes py-3" style="width: 400px;">Enviar</button>
          </div>
        </form>
      </div>
    </div>

    <!--Footer-->
    <div class="container-redes d-flex flex-column text-center py-4">
      <div class="logo-titulo">
        <img src="assets/logo.png" alt="Logo" width="40" height="40" class="align-text-center mx-2">
        <p class="fonte-titulo mx-3">TRINNITY</p>
      </div>
      <div class="d-flex justify-content-center">
        <div class="bolha-redes py-0 px-2 my-3 mx-2 rounded" style="width: 45px;">
          <a href="https://www.instagram.com/matheusctt1/"><i class="bi bi-instagram" style="font-size: 30px; color: black;"></i></a>
        </div>
        <div class="bolha-redes py-0 px-2 my-3 mx-2 rounded" style="width: 45px;">
          <a href="https://www.linkedin.com/in/matheus-costa-da-trindade-b1a909246"><i class="bi bi-linkedin" style="font-size: 30px; color: black;"></i></a>
        </div>
        <div class="bolha-redes py-0 px-2 my-3 mx-2 rounded" style="width: 45px;">
          <a href="https://github.com/Matheusctt1"><i class="bi bi-github" style="font-size: 30px; color: black;"></i></a>
        </div>
      </div>
      <p class="" style="font-size: 18px; color: #ccc;">© Copyright 2025 All Rights Reserved</p>
    </div>

    <!-- Scripts -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

      // Config do Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyBkqEffbS63XzfAvX5T3fJvYtZrAgPQiYE",
        authDomain: "trinnity-project.firebaseapp.com",
        projectId: "trinnity-project",
        storageBucket: "trinnity-project.firebasestorage.app",
        messagingSenderId: "97395639324",
        appId: "1:97395639324:web:e057ca2ef54110eb288bd9"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Função para enviar sugestão
      window.enviarSugestao = async function(nome, email, mensagem) {
        try {
          const hoje = new Date();
          const dia = String(hoje.getDate()).padStart(2, '0');
          const mes = String(hoje.getMonth() + 1).padStart(2, '0');
          const ano = hoje.getFullYear();
          const dataFormatada = `${dia}/${mes}/${ano}`;

          await addDoc(collection(db, "sugestoes"), {
            nome: nome,
            email: email,
            mensagem: mensagem,
            data: dataFormatada
          });

          alert("Sugestão enviada com sucesso!");
          document.getElementById("inputUsuario").value = "";
          document.getElementById("inputEmail").value = "";
          document.getElementById("inputSugestao").value = "";

        } catch (e) {
          alert("Erro ao enviar sugestão: " + e.message);
        }
      }

      // Validação do formulário
      window.forms_alerta = function(nomeUsuario, form) {
        const email = document.getElementById('inputEmail').value;
        const mensagem = document.getElementById('inputSugestao').value;

        if(nomeUsuario && email && mensagem) {
          enviarSugestao(nomeUsuario, email, mensagem);
          return false; // impede reload
        } else {
          alert("Por favor, preencha todos os campos do formulário.");
          return false;
        }
      };

      // Função para exibir sugestões em cards
      window.mostrarSugestoes = async function(containerId) {
        const container = document.getElementById(containerId);
        container.innerHTML = ""; // limpa antes de adicionar

        try {
          const querySnapshot = await getDocs(collection(db, "sugestoes"));
          if(querySnapshot.empty){
            container.innerHTML = "<p>Nenhuma sugestão recebida ainda.</p>";
            return;
          }

          querySnapshot.forEach((doc) => {
            const data = doc.data();
            const card = document.createElement("div");
            card.classList.add("card", "m-2", "p-3");
            card.style.width = "22rem";
            card.innerHTML = `
              <div class="card-body">
                <h5 class="card-title"  style="font-weight: bold;">${data.nome}</h5>
                <h6 class="card-subtitle mb-2 text-muted">${data.email}</h6>
                <p class="card-text">${data.mensagem}</p>
                <small class="text-muted">${data.data}</small>
              </div>
            `;
            container.appendChild(card);
          });

        } catch(e) {
          alert("Erro ao buscar sugestões: " + e.message);
        }
      }

      // Detectar admin e substituir seção
      window.addEventListener('DOMContentLoaded', () => {
        const isAdmin = sessionStorage.getItem("usuarioAdmin") === "true";
        if(isAdmin) {
          const secao = document.getElementById("secaoSugestoes");
          secao.innerHTML = `
            <div class="container_fantasia my-5 mx-5 d-flex flex-column text-center" style="width: 800px;">
              <div class="titulo-fantasia fonte-titulos my-3">
                <h2>Painel Admin</h2>
              </div>
              <div class="texto-fantasia">
                <p>Bem-vindo, Admin! Aqui estão todas as sugestões recebidas:</p>
              </div>
              <!-- Aqui é onde os cards vão aparecer -->
              <div id="cardsContainerAdmin" class="d-flex flex-wrap justify-content-around mt-4"></div>
            </div>
          `;
          
          // Chama a função passando o id do container
          mostrarSugestoes("cardsContainerAdmin");
        }
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

